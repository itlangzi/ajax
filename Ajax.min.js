!function(t,e){"object"==typeof module&&module.exports?exports=module.exports=e():"function"==typeof define&&define.amd?define("Ajax",e):t.Ajax=e()}(this,function(){"use strict";function t(t){var r=arguments.length;if(0===r)return null;if(1===r&&(u(t)||c(t)))return null;for(var n={},o=0;o<r;o++)e(n,t=arguments[o]);return n}function e(e,r){for(var n in r)if(r.hasOwnProperty(n)){var o=r[n];if(o===e)continue;"object"==typeof o?(e[n]=i(o)?[]:{},c(o)||u(o)?e[n]=o:t(e[n],o)):e[n]=o}}function r(t){if(void 0===t||null===t)return!0;if(i(t)&&0===t.length)return!0;for(var e in t)return!t.hasOwnProperty(e);return!0}function n(t){return"[object String]"===Object.prototype.toString.call(t)}function o(t){return"[object FormData]"===Object.prototype.toString.call(t)}function a(t){return"[object Function]"===Object.prototype.toString.call(t)}function s(t){return"[object Boolean]"===Object.prototype.toString.call(t)}function i(t){return"[object Array]"===Object.prototype.toString.call(t)}function u(t){return"[object Null]"===Object.prototype.toString.call(t)}function c(t){return"[object Undefined]"===Object.prototype.toString.call(t)}var l={serialize:function(t){var e=[];if(!r(t)){if(n(t))return t;for(var o in t)t.hasOwnProperty(o)&&e.push(encodeURIComponent(o)+"="+encodeURIComponent(t[o]));return e.join("&")}return null},serializeObject:function(t){if(r(t))return{};for(var e=t.split("&"),n={},o=0,a=e.length;o<a;o++){var s=e[o].split("=");s[0]&&(n[s[0]]=s[1])}return n},resolveData:function(t,e,r){var n=t.toUpperCase(),o=null;return o=this.serialize(e),"GET"!==n&&"HEAD"!==n||null==o||(r+=r.lastIndexOf("?")>-1?"&"+o:"?"+o),{data:o,url:r}}},d=function(){var e=null;e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");var i={url:location.pathname,type:"GET",async:!0,cache:!0,contentType:"application/x-www-form-urlencoded;charset=utf-8",crossDomain:!1,data:null,dataType:"",headers:{},statusCode:{},timeout:0,beforeSend:function(t){},success:function(t,e,r){},error:function(t,e,r){},complete:function(t,e){}},u=function(e){var r=t({},i,e);return r.data=e.data,r};this.abort=function(){!!e&&e.abort()},this.getJSONP=function(t,r,n,o){var a=document.createElement("script"),s=null,i="JSONP_"+((new Date).getTime()+Math.round(1e3*Math.random()));return t.lastIndexOf("callback=?")>-1&&(t=t.replace(/callback=\?/,"")),a.src=t+(t.indexOf("?")>-1?"&":"?")+"callback="+i,a.type="text/javascript",document.body.appendChild(a),window[i]=function(t){delete window[i],s&&clearTimeout(s),r&&r(t),document.body.removeChild(a)},o&&o>0&&(s=setTimeout(function(){n&&n(e,"timeout")},o)),this},this.ajax=function(t){function i(){e.status>=200&&e.status<300||304==e.status?c.success&&a(c.success)&&c.success(e.response,e.statusText,e):c.error&&a(c.error)&&c.error(e,e.statusText,e.status)}var c=u(t||{});if(c.dataType&&("jsonp"===c.dataType||"script"===c.dataType)||c.url.lastIndexOf("?callback=?")>-1||c.url.lastIndexOf("&callback=?")>-1)return this.getJSONP(c.url,c.success,c.error,c.timeout);s(c.crossDomain)&&c.crossDomain&&(e.withCredentials=!0);var d=c.url,f=c.data,p=c.contentType;if(o(f)||/multipart\/form-data/.test(p)){if(p&&!/multipart\/form-data\s*;\s*boundary\s*=[\s\S]+/.test(p)&&(c.contentType=null),!o(f)&&!r(f)){var y=new FormData;n(f)&&(f=serializeObject(f));for(var h in f)f.hasOwnProperty(h)&&y.append(encodeURIComponent(h),encodeURIComponent(f[h]));f=y}}else{var m=l.resolveData(c.type,f,d);f=m.data,d=m.url}if(e.open(c.type,d,c.async),e.responseType=c.dataType||"",c.headers){var b=c.headers;for(var v in b)b.hasOwnProperty(v)&&e.setRequestHeader(v,b[v])}if(p&&e.setRequestHeader("Content-Type",p),c.beforeSend&&a(c.beforeSend)){var j=c.beforeSend(e);if(s(j)&&!j)return e.abort(),j}s(c.async)&&!1===c.async?(e.timeout=0,e.withCredentials=!1,e.responseType=""):e.timeout=c.timeout||0;try{e.send(f)}catch(t){c.error&&a(c.error)&&c.error(e,t)}return e.onreadystatechange=function(){4===e.readyState&&void 0===e.onload&&i()},e.onload=function(t){i()},e.onloadend=function(t){c.complete&&a(c.complete)&&c.complete(e,e.statusText),e.status>=200&&e.status<300||304==e.status?c.statusCode&&c.statusCode[e.status]&&c.statusCode[e.status].call(this,e.response,e.statusText,e):c.statusCode&&c.statusCode[e.status]&&c.statusCode[e.status].call(this,e,e.statusText,e.status)},e.onabort=function(t){c.error&&a(c.error)&&c.error(e,"abort")},e.ontimeout=function(t){c.error&&a(c.error)&&c.error(e,"timeout")},e.onerror=function(t){c.error&&a(c.error)&&c.error(e,"network error")},this},this.get=function(t,e,r,n){return a(e)&&(r=e,e=void 0),this.ajax({url:t,type:"GET",data:e,success:r,dataType:n})},this.post=function(t,e,r,n){return a(e)&&(r=e,e=void 0),this.ajax({url:t,type:"POST",data:e,success:r,dataType:n})},this.getJSON=function(t,e,r){return this.get(t,e,r,"json")},this.getScript=function(t,e){return this.get(t,void 0,e,"script")}};return d.isFunction=a,d.isArray=i,d.isBool=s,d.isObject=function(t){var e=typeof t;return!!t&&("object"===e||"function"===e)},d.isUndefined=c,d.isNull=u,d.isEmpty=r,d.extend=t,d});